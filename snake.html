<!DOCTYPE html>
<html>
<head>
<title>Snake!</title>
<style>
canvas{
display: block;
margin: 0 auto;
}
</style>
</head>
<body>
<canvas id="canvas" width="600" height="600" style="border:1px solid #000000;"></canvas>





<script>
const cvs = document.getElementById('canvas');
const ctx = cvs.getContext('2d');




let box = 30; // blok planszy



let snake =[];
snake[0] = {x: 9*box, y: 10*box};


let food ={ x: Math.floor(Math.random()*20+1)*box,
            y: Math.floor(Math.random()*20+1)*box
};


let score = 0;

let d;

document.addEventListener("keydown",kierunki);

function kierunki(event){

if(event.keyCode==37 && d!="RIGHT"){
d="LEFT";
}
else if (event.keyCode == 38 && d!="DOWN"){
d="UP";
}
else if(event.keyCode == 39 && d!="LEFT"){
d="RIGHT";
}
else if(event.keyCode == 40 && d!="UP"){
d="DOWN";
}

}

<!-- kolizja -->

function kolizja(głowa,tablica){
for(let i = 0; i<tablica.lenght; i++){
if(głowa.x == tablica[i].x && głowa.y == tablica[i].y){
return true;
}
}
return false;
}

function draw(){


for( let i = 0; i < snake.length ; i++){
ctx.fillStyle = ( i == 0 )? "black" : "white";
ctx.fillRect(snake[i].x,snake[i].y,box,box);
        
ctx.strokeStyle = "red";
ctx.strokeRect(snake[i].x,snake[i].y,box,box);

}
ctx.fillStyle = 'red';
ctx.fillRect(food.x,food.y,box,box);

<!-- przeszła pozycja głowy --> 

let snakeX = snake[0].x;
let snakeY = snake[0].y;


if(d=="LEFT")snakeX -= box;
if(d=="UP")snakeY -= box;
if(d=="RIGHT")snakeX += box;
if(d=="DOWN")snakeY += box;

<!-- dodawanie komórek -->
if(snakeX == food.x && snakeY == food.y){
score++;
food = {
x : Math.floor(Math.random()*20+1) * box,
y : Math.floor(Math.random()*20+1) * box
}     
}else{
snake.pop();
}
<!-- dodanie nowej głowy -->

let nowaGłowa = {
	x: snakeX,
	y: snakeY
}
if(snakeX < box || snakeX > 20*box || snakeY < box || snakeY > 20*box ||  kolizja(nowaGłowa,snake)){
clearInterval(gra);
alert("Game Over!");
}
snake.unshift(nowaGłowa);

ctx.fillStyle = "black";
ctx.font = "45px Times New Roman";
ctx.fillText(score,2*box,1.6*box);




}
let gra = setInterval(draw,100);




</script>
</body>